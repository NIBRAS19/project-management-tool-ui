<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProjectHub - Team Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        info: '#3b82f6',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .gradient-primary {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }
            .gradient-success {
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            }
            .gradient-warning {
                background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            }
            .gradient-danger {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            }
            .gradient-info {
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            }
            .animate-slide-in {
                animation: slideIn 0.3s ease-out;
            }
            .team-card {
                transition: all 0.2s ease;
            }
            .team-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .permission-row:hover {
                background-color: #f8fafc;
            }
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            .scrollbar-thin {
                scrollbar-width: thin;
                scrollbar-color: #cbd5e1 #f1f5f9;
            }
            .scrollbar-thin::-webkit-scrollbar {
                width: 6px;
            }
            .scrollbar-thin::-webkit-scrollbar-track {
                background: #f1f5f9;
                border-radius: 3px;
            }
            .scrollbar-thin::-webkit-scrollbar-thumb {
                background: #cbd5e1;
                border-radius: 3px;
            }
            .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                background: #94a3b8;
            }
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Top Navigation -->
    <nav
        class="fixed top-0 left-0 right-0 bg-white border-b border-gray-200 h-[70px] flex items-center justify-between px-8 z-50">
        <div class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent cursor-pointer"
            onclick="navigateTo('dashboard')">
            ProjectHub
        </div>

        <div class="flex-1 max-w-md mx-10">
            <div class="relative">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"><i
                        class="fas fa-search"></i></span>
                <input type="text" id="globalSearch"
                    class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl text-sm focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all"
                    placeholder="Search projects, tasks, or people...">
            </div>
        </div>

        <div class="flex items-center gap-4">
            <button onclick="openCreateModal('task')"
                class="w-11 h-11 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-indigo-100 hover:text-primary transition-all hover:-translate-y-0.5">
                <i class="fas fa-plus"></i>
            </button>
            <button onclick="toggleNotifications()"
                class="relative w-11 h-11 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-indigo-100 hover:text-primary transition-all hover:-translate-y-0.5">
                <i class="fas fa-bell"></i>
                <span id="notifCount"
                    class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold w-5 h-5 rounded-full flex items-center justify-center">3</span>
            </button>
            <div onclick="navigateTo('settings')"
                class="w-11 h-11 rounded-xl gradient-primary text-white flex items-center justify-center font-semibold text-sm cursor-pointer hover:scale-105 hover:shadow-lg hover:shadow-primary/30 transition-all">
                SM
            </div>
        </div>
    </nav>

    <!-- App Layout -->
    <div class="flex mt-[70px]">
        <!-- Sidebar -->
        <aside
            class="fixed left-0 w-64 h-[calc(100vh-70px)] bg-white border-r border-gray-200 p-6 overflow-y-auto scrollbar-thin">
            <div class="mb-8">
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="dashboard" onclick="navigateTo('dashboard')">
                    <i class="fas fa-chart-bar w-5 text-center"></i>
                    <span class="font-medium">Dashboard</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="tasks" onclick="navigateTo('tasks')">
                    <i class="fas fa-tasks w-5 text-center"></i>
                    <span class="font-medium">Tasks</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="projects" onclick="navigateTo('projects')">
                    <i class="fas fa-folder w-5 text-center"></i>
                    <span class="font-medium">Projects</span>
                </div>
                <div class="nav-item active flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 gradient-primary text-white shadow-lg shadow-primary/20"
                    data-page="team" onclick="navigateTo('team')">
                    <i class="fas fa-users w-5 text-center"></i>
                    <span class="font-medium">Team</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="calendar" onclick="navigateTo('calendar')">
                    <i class="fas fa-calendar w-5 text-center"></i>
                    <span class="font-medium">Calendar</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="reports" onclick="navigateTo('reports')">
                    <i class="fas fa-chart-line w-5 text-center"></i>
                    <span class="font-medium">Reports</span>
                </div>
            </div>

            <div>
                <div class="text-xs font-bold text-gray-400 uppercase tracking-wider px-4 mb-3">Workspaces</div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="settings" onclick="navigateTo('settings')">
                    <i class="fas fa-cog w-5 text-center"></i>
                    <span class="font-medium">Settings</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="ml-64 flex-1 p-8">
            <!-- Team Management Module -->
            <div id="team-page" class="page">
                <!-- Team Sub-Navigation -->
                <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6">
                    <div class="flex items-center justify-between">
                        <div class="flex gap-1 bg-gray-100 p-1 rounded-lg">
                            <button id="nav-directory"
                                class="team-nav-item active px-4 py-2 rounded-md text-sm font-medium transition-all"
                                data-view="directory" onclick="switchTeamView('directory')">
                                <i class="fas fa-users mr-2"></i>Team Directory
                            </button>
                            <button id="nav-profile"
                                class="team-nav-item px-4 py-2 rounded-md text-sm font-medium transition-all"
                                data-view="profile" onclick="switchTeamView('profile')">
                                <i class="fas fa-user mr-2"></i>My Profile
                            </button>
                            <button id="nav-permissions"
                                class="team-nav-item px-4 py-2 rounded-md text-sm font-medium transition-all"
                                data-view="permissions" onclick="switchTeamView('permissions')">
                                <i class="fas fa-shield-alt mr-2"></i>Roles & Permissions
                            </button>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="flex gap-2">
                                <button onclick="exportTeamData()"
                                    class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-download mr-1"></i> Export
                                </button>
                                <button onclick="showTeamFilters()"
                                    class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-filter mr-1"></i> Filter
                                </button>
                            </div>
                            <button onclick="inviteTeamMember()"
                                class="gradient-primary text-white px-4 py-2 rounded-lg font-semibold shadow-lg shadow-primary/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/40 transition-all flex items-center gap-2">
                                <i class="fas fa-user-plus"></i>
                                <span>Invite Member</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Page Header -->
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h1 class="text-4xl font-bold text-gray-900 mb-1" id="teamPageTitle">Team Directory</h1>
                        <p class="text-gray-500"><span id="teamMembersCount">0</span> team members</p>
                    </div>

                    <!-- Quick Department Filters -->
                    <div class="flex gap-2">
                        <button onclick="filterTeamByDepartment('all')"
                            class="quick-filter active px-3 py-2 rounded-lg text-sm font-medium bg-primary text-white transition-all">
                            All Departments
                        </button>
                        <button onclick="filterTeamByDepartment('development')"
                            class="quick-filter px-3 py-2 rounded-lg text-sm font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 transition-all">
                            Development
                        </button>
                        <button onclick="filterTeamByDepartment('design')"
                            class="quick-filter px-3 py-2 rounded-lg text-sm font-medium bg-purple-100 text-purple-700 hover:bg-purple-200 transition-all">
                            Design
                        </button>
                        <button onclick="filterTeamByDepartment('marketing')"
                            class="quick-filter px-3 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700 hover:bg-green-200 transition-all">
                            Marketing
                        </button>
                        <button onclick="filterTeamByDepartment('management')"
                            class="quick-filter px-3 py-2 rounded-lg text-sm font-medium bg-yellow-100 text-yellow-700 hover:bg-yellow-200 transition-all">
                            Management
                        </button>
                    </div>
                </div>

                <!-- Advanced Filter Panel -->
                <div id="teamFilterPanel" class="hidden bg-white rounded-xl border border-gray-200 p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Advanced Filters</h3>
                        <button onclick="hideTeamFilters()" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                            <select id="roleFilter" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="all">All Roles</option>
                                <option value="developer">Developer</option>
                                <option value="designer">Designer</option>
                                <option value="manager">Manager</option>
                                <option value="qa">QA Engineer</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select id="statusFilter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="all">All Status</option>
                                <option value="online">Online</option>
                                <option value="offline">Offline</option>
                                <option value="away">Away</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                            <select id="locationFilter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="all">All Locations</option>
                                <option value="new-york">New York</option>
                                <option value="london">London</option>
                                <option value="tokyo">Tokyo</option>
                                <option value="remote">Remote</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sort By</label>
                            <select id="sortFilter" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                <option value="name">Name</option>
                                <option value="role">Role</option>
                                <option value="department">Department</option>
                                <option value="join-date">Join Date</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex justify-end gap-3 mt-6">
                        <button onclick="clearAllTeamFilters()"
                            class="px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                            Clear All
                        </button>
                        <button onclick="applyAdvancedTeamFilters()"
                            class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors">
                            Apply Filters
                        </button>
                    </div>
                </div>

                <!-- Team Directory View -->
                <div id="teamDirectoryView" class="team-view">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <!-- Team member cards will be populated here -->
                    </div>
                </div>

                <!-- Member Profile View -->
                <div id="teamProfileView" class="team-view hidden">
                    <!-- Profile Header -->
                    <div class="bg-white rounded-xl border border-gray-200 overflow-hidden mb-8">
                        <!-- Cover Photo -->
                        <div class="h-32 bg-gradient-to-r from-primary to-secondary relative">
                            <button onclick="changeCoverPhoto()"
                                class="absolute top-4 right-4 bg-white/20 backdrop-blur-sm text-white px-3 py-1 rounded-lg text-sm hover:bg-white/30 transition-colors">
                                <i class="fas fa-camera mr-1"></i> Change Cover
                            </button>
                        </div>

                        <!-- Profile Info -->
                        <div class="px-8 pb-6">
                            <div class="flex items-end -mt-12 mb-4">
                                <div class="relative">
                                    <div
                                        class="w-24 h-24 rounded-full bg-white border-4 border-white flex items-center justify-center text-2xl font-bold text-primary shadow-lg">
                                        SM
                                    </div>
                                    <div
                                        class="absolute bottom-2 right-2 w-4 h-4 bg-green-500 border-2 border-white rounded-full">
                                    </div>
                                </div>
                                <div class="ml-6 mb-2">
                                    <h1 class="text-2xl font-bold text-gray-900">Sarah Mitchell</h1>
                                    <p class="text-gray-600">Project Manager</p>
                                    <div class="flex items-center gap-2 mt-1">
                                        <i class="fas fa-map-marker-alt text-gray-400 text-sm"></i>
                                        <span class="text-sm text-gray-500">New York, EST</span>
                                        <span class="text-gray-300">•</span>
                                        <i class="fas fa-calendar text-gray-400 text-sm"></i>
                                        <span class="text-sm text-gray-500">Joined Jan 2023</span>
                                    </div>
                                </div>
                                <div class="ml-auto flex gap-3">
                                    <button onclick="editProfile()"
                                        class="px-4 py-2 rounded-lg text-sm font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                                        <i class="fas fa-edit mr-2"></i>Edit Profile
                                    </button>
                                    <button onclick="sendMessage()"
                                        class="gradient-primary text-white px-4 py-2 rounded-lg font-semibold shadow-lg shadow-primary/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/40 transition-all">
                                        <i class="fas fa-paper-plane mr-2"></i>Message
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Tabs -->
                    <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6">
                        <div class="flex gap-8 border-b border-gray-200">
                            <button id="tab-profile-overview"
                                class="profile-tab active py-3 border-b-2 border-primary text-primary font-medium"
                                onclick="switchProfileTab('overview')">
                                <i class="fas fa-user-circle mr-2"></i>Overview
                            </button>
                            <button id="tab-profile-tasks"
                                class="profile-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                                onclick="switchProfileTab('tasks')">
                                <i class="fas fa-tasks mr-2"></i>Tasks
                            </button>
                            <button id="tab-profile-projects"
                                class="profile-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                                onclick="switchProfileTab('projects')">
                                <i class="fas fa-folder mr-2"></i>Projects
                            </button>
                            <button id="tab-profile-activity"
                                class="profile-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                                onclick="switchProfileTab('activity')">
                                <i class="fas fa-history mr-2"></i>Activity
                            </button>
                            <button id="tab-profile-time"
                                class="profile-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                                onclick="switchProfileTab('time')">
                                <i class="fas fa-clock mr-2"></i>Time Logs
                            </button>
                        </div>
                    </div>

                    <!-- Overview Tab Content -->
                    <div id="tab-content-profile-overview" class="profile-tab-content">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <!-- Left Column -->
                            <div class="lg:col-span-2 space-y-6">
                                <!-- About Section -->
                                <div class="bg-white rounded-xl border border-gray-200 p-6">
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">About</h3>
                                    <p class="text-gray-600 mb-4">
                                        Experienced Project Manager with 8+ years in tech industry. Specialized in agile
                                        methodologies and cross-functional team leadership. Passionate about creating
                                        efficient workflows and delivering high-quality products.
                                    </p>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-700 mb-1">Department</label>
                                            <p class="text-gray-900">Project Management</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                            <p class="text-gray-900">sarah.m@company.com</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                            <p class="text-gray-900">+1 (555) 123-4567</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Birthday</label>
                                            <p class="text-gray-900">March 15</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Skills & Expertise -->
                                <div class="bg-white rounded-xl border border-gray-200 p-6">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-xl font-semibold text-gray-900">Skills & Expertise</h3>
                                        <button onclick="addSkill()"
                                            class="text-primary text-sm font-medium hover:text-secondary transition-colors">
                                            <i class="fas fa-plus mr-1"></i> Add Skill
                                        </button>
                                    </div>
                                    <div class="flex flex-wrap gap-2">
                                        <span
                                            class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">Project
                                            Management</span>
                                        <span
                                            class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">Agile
                                            Methodology</span>
                                        <span
                                            class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">Team
                                            Leadership</span>
                                        <span
                                            class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium">Risk
                                            Management</span>
                                        <span
                                            class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium">Stakeholder
                                            Communication</span>
                                    </div>
                                </div>

                                <!-- Recent Activity -->
                                <div class="bg-white rounded-xl border border-gray-200 p-6">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-xl font-semibold text-gray-900">Recent Activity</h3>
                                        <button onclick="viewAllActivity()"
                                            class="text-primary text-sm font-medium hover:text-secondary transition-colors">
                                            View All →
                                        </button>
                                    </div>
                                    <div class="space-y-4">
                                        <div class="flex gap-3">
                                            <div
                                                class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-sm font-semibold flex-shrink-0">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div class="flex-1">
                                                <p class="text-sm text-gray-900">Completed task "Design Review"</p>
                                                <p class="text-xs text-gray-500 mt-1">2 hours ago</p>
                                            </div>
                                        </div>
                                        <div class="flex gap-3">
                                            <div
                                                class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-sm font-semibold flex-shrink-0">
                                                <i class="fas fa-comment"></i>
                                            </div>
                                            <div class="flex-1">
                                                <p class="text-sm text-gray-900">Commented on "Website Redesign" project
                                                </p>
                                                <p class="text-xs text-gray-500 mt-1">5 hours ago</p>
                                            </div>
                                        </div>
                                        <div class="flex gap-3">
                                            <div
                                                class="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-sm font-semibold flex-shrink-0">
                                                <i class="fas fa-upload"></i>
                                            </div>
                                            <div class="flex-1">
                                                <p class="text-sm text-gray-900">Uploaded project requirements document
                                                </p>
                                                <p class="text-xs text-gray-500 mt-1">Yesterday</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column -->
                            <div class="space-y-6">
                                <!-- Stats Card -->
                                <div class="bg-white rounded-xl border border-gray-200 p-6">
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Performance Stats</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                                <span>Tasks Completed</span>
                                                <span class="font-semibold">142</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                                <span>Projects Delivered</span>
                                                <span class="font-semibold">23</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div class="bg-blue-500 h-2 rounded-full" style="width: 92%"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                                <span>On-Time Delivery</span>
                                                <span class="font-semibold">94%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div class="bg-purple-500 h-2 rounded-full" style="width: 94%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Current Projects -->
                                <div class="bg-white rounded-xl border border-gray-200 p-6">
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Current Projects</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <div class="font-medium text-gray-900">Website Redesign</div>
                                                <div class="text-sm text-gray-500">68% complete</div>
                                            </div>
                                            <div
                                                class="w-12 h-12 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center">
                                                <i class="fas fa-globe"></i>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <div class="font-medium text-gray-900">Mobile App Launch</div>
                                                <div class="text-sm text-gray-500">42% complete</div>
                                            </div>
                                            <div
                                                class="w-12 h-12 rounded-lg bg-green-100 text-green-600 flex items-center justify-center">
                                                <i class="fas fa-mobile-alt"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Contact Information -->
                                <div class="bg-white rounded-xl border border-gray-200 p-6">
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Contact</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center gap-3">
                                            <i class="fas fa-envelope text-gray-400"></i>
                                            <span class="text-sm text-gray-600">sarah.m@company.com</span>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <i class="fas fa-phone text-gray-400"></i>
                                            <span class="text-sm text-gray-600">+1 (555) 123-4567</span>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <i class="fas fa-slack text-gray-400"></i>
                                            <span class="text-sm text-gray-600">@sarah_mitchell</span>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <i class="fas fa-video text-gray-400"></i>
                                            <span class="text-sm text-gray-600">Schedule Meeting</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other Profile Tabs -->
                    <div id="tab-content-profile-tasks" class="profile-tab-content hidden">
                        <div class="bg-white rounded-xl border border-gray-200 p-6">
                            <div class="text-center py-12 text-gray-500">
                                <i class="fas fa-tasks text-4xl mb-3 opacity-50"></i>
                                <p>User's assigned tasks</p>
                                <p class="text-sm mt-1">View and manage tasks assigned to this team member</p>
                            </div>
                        </div>
                    </div>

                    <div id="tab-content-profile-projects" class="profile-tab-content hidden">
                        <div class="bg-white rounded-xl border border-gray-200 p-6">
                            <div class="text-center py-12 text-gray-500">
                                <i class="fas fa-folder text-4xl mb-3 opacity-50"></i>
                                <p>User's projects</p>
                                <p class="text-sm mt-1">Projects this team member is involved in</p>
                            </div>
                        </div>
                    </div>

                    <div id="tab-content-profile-activity" class="profile-tab-content hidden">
                        <div class="bg-white rounded-xl border border-gray-200 p-6">
                            <div class="text-center py-12 text-gray-500">
                                <i class="fas fa-history text-4xl mb-3 opacity-50"></i>
                                <p>User activity log</p>
                                <p class="text-sm mt-1">Complete history of user's activities</p>
                            </div>
                        </div>
                    </div>

                    <div id="tab-content-profile-time" class="profile-tab-content hidden">
                        <div class="bg-white rounded-xl border border-gray-200 p-6">
                            <div class="text-center py-12 text-gray-500">
                                <i class="fas fa-clock text-4xl mb-3 opacity-50"></i>
                                <p>Time tracking data</p>
                                <p class="text-sm mt-1">Time logs and productivity metrics</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Roles & Permissions View -->
                <div id="teamPermissionsView" class="team-view hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Roles & Permissions</h2>
                                <p class="text-gray-600 mt-1">Manage team roles and access permissions</p>
                            </div>
                            <button onclick="createNewRole()"
                                class="gradient-primary text-white px-4 py-2 rounded-lg font-semibold shadow-lg shadow-primary/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/40 transition-all flex items-center gap-2">
                                <i class="fas fa-plus"></i>
                                <span>New Role</span>
                            </button>
                        </div>

                        <!-- Permissions Matrix -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead class="bg-gray-50 border-b border-gray-200">
                                        <tr>
                                            <th
                                                class="px-6 py-4 text-left text-sm font-semibold text-gray-900 uppercase tracking-wider w-64">
                                                Permission</th>
                                            <th
                                                class="px-6 py-4 text-center text-sm font-semibold text-gray-900 uppercase tracking-wider w-32">
                                                Admin</th>
                                            <th
                                                class="px-6 py-4 text-center text-sm font-semibold text-gray-900 uppercase tracking-wider w-32">
                                                Manager</th>
                                            <th
                                                class="px-6 py-4 text-center text-sm font-semibold text-gray-900 uppercase tracking-wider w-32">
                                                Member</th>
                                            <th
                                                class="px-6 py-4 text-center text-sm font-semibold text-gray-900 uppercase tracking-wider w-32">
                                                Guest</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200">
                                        <!-- Project Permissions -->
                                        <tr class="bg-gray-50">
                                            <td colspan="5"
                                                class="px-6 py-3 text-sm font-semibold text-gray-900 uppercase">Project
                                                Management</td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Create Projects</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Edit All Projects</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Delete Projects</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>

                                        <!-- Task Permissions -->
                                        <tr class="bg-gray-50">
                                            <td colspan="5"
                                                class="px-6 py-3 text-sm font-semibold text-gray-900 uppercase">Task
                                                Management</td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Create Tasks</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Assign Tasks</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>

                                        <!-- Team Permissions -->
                                        <tr class="bg-gray-50">
                                            <td colspan="5"
                                                class="px-6 py-3 text-sm font-semibold text-gray-900 uppercase">Team
                                                Management</td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Invite Members</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Manage Roles</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>

                                        <!-- Financial Permissions -->
                                        <tr class="bg-gray-50">
                                            <td colspan="5"
                                                class="px-6 py-3 text-sm font-semibold text-gray-900 uppercase">
                                                Financial</td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">View Budgets</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>
                                        <tr class="permission-row">
                                            <td class="px-6 py-4 text-sm text-gray-900">Manage Budgets</td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox" checked
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <input type="checkbox"
                                                    class="rounded border-gray-300 text-primary focus:ring-primary">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="flex justify-end gap-3 mt-6">
                            <button onclick="resetPermissions()"
                                class="px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                Reset Changes
                            </button>
                            <button onclick="savePermissions()"
                                class="gradient-primary text-white px-4 py-2 rounded-lg font-semibold shadow-lg shadow-primary/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/40 transition-all">
                                Save Permissions
                            </button>
                        </div>
                    </div>

                    <!-- Role Management -->
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Role Management</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <h4 class="font-semibold text-gray-900">Admin</h4>
                                    <span class="px-2 py-1 text-xs font-semibold bg-red-100 text-red-700 rounded-full">4
                                        users</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-4">Full system access and administrative privileges
                                </p>
                                <button onclick="editRole('admin')"
                                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    Manage Role
                                </button>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <h4 class="font-semibold text-gray-900">Manager</h4>
                                    <span
                                        class="px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-700 rounded-full">12
                                        users</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-4">Project and team management capabilities</p>
                                <button onclick="editRole('manager')"
                                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    Manage Role
                                </button>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <h4 class="font-semibold text-gray-900">Member</h4>
                                    <span
                                        class="px-2 py-1 text-xs font-semibold bg-green-100 text-green-700 rounded-full">45
                                        users</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-4">Standard team member with task access</p>
                                <button onclick="editRole('member')"
                                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    Manage Role
                                </button>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <h4 class="font-semibold text-gray-900">Guest</h4>
                                    <span
                                        class="px-2 py-1 text-xs font-semibold bg-gray-100 text-gray-700 rounded-full">8
                                        users</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-4">Limited access for external collaborators</p>
                                <button onclick="editRole('guest')"
                                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    Manage Role
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Pages (simplified) -->
            <div id="dashboard-page" class="page hidden">
                <h1 class="text-4xl font-bold text-gray-900 mb-2">Dashboard</h1>
                <p class="text-gray-500 mb-8">Your project overview</p>
                <div class="bg-white rounded-xl border border-gray-200 p-20 text-center text-gray-400">
                    <i class="fas fa-chart-bar text-4xl mb-3 opacity-50"></i>
                    <p>Dashboard interface...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Invite Member Modal -->
    <div id="inviteMemberModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl w-full max-w-md shadow-2xl">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Invite Team Member</h2>
                <button onclick="closeInviteModal()"
                    class="w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                    <input type="email"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all"
                        placeholder="colleague@company.com">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Role</label>
                    <select
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                        <option value="member">Team Member</option>
                        <option value="manager">Manager</option>
                        <option value="admin">Administrator</option>
                        <option value="guest">Guest</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Department</label>
                    <select
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                        <option value="development">Development</option>
                        <option value="design">Design</option>
                        <option value="marketing">Marketing</option>
                        <option value="management">Management</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Personal Message (Optional)</label>
                    <textarea rows="3"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all resize-none"
                        placeholder="Add a personal invitation message..."></textarea>
                </div>
            </div>
            <div class="flex gap-3 justify-end p-6 border-t border-gray-200">
                <button onclick="closeInviteModal()"
                    class="px-4 py-2 rounded-lg font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                    Cancel
                </button>
                <button onclick="sendInvitation()"
                    class="gradient-primary text-white px-4 py-2 rounded-lg font-semibold">
                    Send Invitation
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"
        class="hidden fixed top-24 right-8 bg-white p-4 rounded-xl shadow-2xl z-[60] min-w-[300px] border-l-4 animate-slide-in">
        <div class="flex items-center gap-3">
            <i id="toastIcon" class="fas fa-check-circle text-green-500"></i>
            <div id="toastMessage" class="text-sm font-medium text-gray-900"></div>
        </div>
    </div>

    <script>
        // Team Data
        const teamMembers = [
            {
                id: 1,
                name: 'Sarah Mitchell',
                role: 'Project Manager',
                department: 'management',
                email: 'sarah.m@company.com',
                avatar: 'SM',
                status: 'online',
                location: 'New York',
                joinDate: '2023-01-15',
                skills: ['Project Management', 'Agile Methodology', 'Team Leadership', 'Risk Management'],
                currentProjects: 5,
                tasksCompleted: 142,
                performance: 94
            },
            {
                id: 2,
                name: 'Mike Johnson',
                role: 'UI/UX Designer',
                department: 'design',
                email: 'mike.j@company.com',
                avatar: 'MJ',
                status: 'online',
                location: 'London',
                joinDate: '2022-08-22',
                skills: ['UI Design', 'UX Research', 'Prototyping', 'Design Systems'],
                currentProjects: 3,
                tasksCompleted: 89,
                performance: 87
            },
            {
                id: 3,
                name: 'Alex Lee',
                role: 'Frontend Developer',
                department: 'development',
                email: 'alex.l@company.com',
                avatar: 'AL',
                status: 'away',
                location: 'Tokyo',
                joinDate: '2023-03-10',
                skills: ['React', 'TypeScript', 'Next.js', 'Tailwind CSS'],
                currentProjects: 4,
                tasksCompleted: 67,
                performance: 92
            },
            {
                id: 4,
                name: 'Taylor Jones',
                role: 'Backend Developer',
                department: 'development',
                email: 'taylor.j@company.com',
                avatar: 'TJ',
                status: 'online',
                location: 'Remote',
                joinDate: '2022-11-05',
                skills: ['Node.js', 'Python', 'PostgreSQL', 'AWS'],
                currentProjects: 3,
                tasksCompleted: 78,
                performance: 89
            },
            {
                id: 5,
                name: 'Kim Rivera',
                role: 'QA Engineer',
                department: 'development',
                email: 'kim.r@company.com',
                avatar: 'KR',
                status: 'offline',
                location: 'New York',
                joinDate: '2023-02-18',
                skills: ['Testing', 'Automation', 'CI/CD', 'Quality Assurance'],
                currentProjects: 2,
                tasksCompleted: 45,
                performance: 85
            },
            {
                id: 6,
                name: 'Jordan Smith',
                role: 'Marketing Manager',
                department: 'marketing',
                email: 'jordan.s@company.com',
                avatar: 'JS',
                status: 'online',
                location: 'London',
                joinDate: '2022-09-30',
                skills: ['Digital Marketing', 'SEO', 'Content Strategy', 'Analytics'],
                currentProjects: 4,
                tasksCompleted: 56,
                performance: 91
            },
            {
                id: 7,
                name: 'Casey Brown',
                role: 'DevOps Engineer',
                department: 'development',
                email: 'casey.b@company.com',
                avatar: 'CB',
                status: 'online',
                location: 'Remote',
                joinDate: '2023-04-12',
                skills: ['Docker', 'Kubernetes', 'Terraform', 'CI/CD'],
                currentProjects: 3,
                tasksCompleted: 34,
                performance: 88
            },
            {
                id: 8,
                name: 'Morgan Wilson',
                role: 'Product Designer',
                department: 'design',
                email: 'morgan.w@company.com',
                avatar: 'MW',
                status: 'away',
                location: 'Tokyo',
                joinDate: '2023-01-08',
                skills: ['Product Design', 'User Research', 'Figma', 'Prototyping'],
                currentProjects: 2,
                tasksCompleted: 41,
                performance: 90
            }
        ];

        let currentTeamView = 'directory';
        let currentProfileTab = 'overview';
        let currentDepartmentFilter = 'all';

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            navigateTo('team');
            renderTeamDirectory();
            updateTeamMembersCount();
        });

        // Navigation
        function navigateTo(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(page + '-page').classList.remove('hidden');

            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.page === page) {
                    item.classList.remove('text-gray-600', 'hover:bg-gray-100', 'hover:text-primary');
                    item.classList.add('gradient-primary', 'text-white', 'shadow-lg', 'shadow-primary/20');
                } else {
                    item.classList.add('text-gray-600', 'hover:bg-gray-100', 'hover:text-primary');
                    item.classList.remove('gradient-primary', 'text-white', 'shadow-lg', 'shadow-primary/20');
                }
            });
        }

        // Team View Switching
        function switchTeamView(view) {
            // Hide all views
            document.querySelectorAll('.team-view').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('.team-nav-item').forEach(nav => nav.classList.remove('active', 'bg-white', 'shadow-sm', 'text-primary'));

            // Show selected view
            document.getElementById('team' + capitalizeFirst(view) + 'View').classList.remove('hidden');
            document.getElementById('nav-' + view).classList.add('active', 'bg-white', 'shadow-sm', 'text-primary');

            currentTeamView = view;

            // Update page title
            const titles = {
                'directory': 'Team Directory',
                'profile': 'My Profile',
                'permissions': 'Roles & Permissions'
            };
            document.getElementById('teamPageTitle').textContent = titles[view] || 'Team';
        }

        function capitalizeFirst(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        // Filtering
        function filterTeamByDepartment(department) {
            currentDepartmentFilter = department;

            // Update quick filter buttons
            document.querySelectorAll('.quick-filter').forEach(btn => {
                btn.classList.remove('active', 'bg-primary', 'text-white');
                btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
            });

            event.target.classList.add('active', 'bg-primary', 'text-white');
            event.target.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');

            renderTeamDirectory();
        }

        function showTeamFilters() {
            document.getElementById('teamFilterPanel').classList.toggle('hidden');
        }

        function hideTeamFilters() {
            document.getElementById('teamFilterPanel').classList.add('hidden');
        }

        function applyAdvancedTeamFilters() {
            // In a real app, this would apply the filters
            showToast('Team filters applied successfully', 'success');
            hideTeamFilters();
        }

        function clearAllTeamFilters() {
            document.getElementById('roleFilter').value = 'all';
            document.getElementById('statusFilter').value = 'all';
            document.getElementById('locationFilter').value = 'all';
            document.getElementById('sortFilter').value = 'name';
            showToast('All filters cleared', 'success');
        }

        // Team Directory Rendering
        function renderTeamDirectory() {
            const container = document.getElementById('teamDirectoryView');
            let filteredMembers = teamMembers;

            // Apply department filter
            if (currentDepartmentFilter !== 'all') {
                filteredMembers = teamMembers.filter(member => member.department === currentDepartmentFilter);
            }

            container.innerHTML = filteredMembers.map(member => `
                <div class="team-card bg-white rounded-xl border border-gray-200 p-6 text-center">
                    <div class="relative inline-block mb-4">
                        <div class="w-16 h-16 rounded-full ${getDepartmentColor(member.department)} flex items-center justify-center text-white text-lg font-bold mx-auto">
                            ${member.avatar}
                        </div>
                        <div class="absolute bottom-1 right-1 w-3 h-3 ${getStatusColor(member.status)} border-2 border-white rounded-full"></div>
                    </div>
                    
                    <h3 class="text-lg font-semibold text-gray-900 mb-1">${member.name}</h3>
                    <p class="text-sm text-gray-600 mb-2">${member.role}</p>
                    <p class="text-xs text-gray-500 mb-4 flex items-center justify-center gap-1">
                        <i class="fas fa-map-marker-alt"></i>
                        ${member.location}
                    </p>
                    
                    <div class="flex justify-center gap-1 mb-4">
                        ${member.skills.slice(0, 3).map(skill => `
                            <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs">${skill.split(' ')[0]}</span>
                        `).join('')}
                        ${member.skills.length > 3 ? `
                            <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs">+${member.skills.length - 3}</span>
                        ` : ''}
                    </div>
                    
                    <div class="flex justify-between text-sm text-gray-600 mb-4">
                        <div class="text-center">
                            <div class="font-semibold text-gray-900">${member.currentProjects}</div>
                            <div class="text-xs">Projects</div>
                        </div>
                        <div class="text-center">
                            <div class="font-semibold text-gray-900">${member.tasksCompleted}</div>
                            <div class="text-xs">Tasks</div>
                        </div>
                        <div class="text-center">
                            <div class="font-semibold text-gray-900">${member.performance}%</div>
                            <div class="text-xs">Perf.</div>
                        </div>
                    </div>
                    
                    <button onclick="viewMemberProfile(${member.id})" class="w-full gradient-primary text-white py-2 rounded-lg font-semibold text-sm hover:-translate-y-0.5 hover:shadow-lg transition-all">
                        <i class="fas fa-user mr-2"></i>View Profile
                    </button>
                </div>
            `).join('');
        }

        function getDepartmentColor(department) {
            const colors = {
                'management': 'bg-gradient-to-r from-purple-500 to-pink-500',
                'development': 'bg-gradient-to-r from-blue-500 to-cyan-500',
                'design': 'bg-gradient-to-r from-orange-500 to-red-500',
                'marketing': 'bg-gradient-to-r from-green-500 to-emerald-500'
            };
            return colors[department] || 'bg-gradient-to-r from-gray-500 to-gray-700';
        }

        function getStatusColor(status) {
            const colors = {
                'online': 'bg-green-500',
                'away': 'bg-yellow-500',
                'offline': 'bg-gray-400'
            };
            return colors[status] || 'bg-gray-400';
        }

        function viewMemberProfile(memberId) {
            const member = teamMembers.find(m => m.id === memberId);
            if (member) {
                // In a real app, this would navigate to the member's profile
                showToast(`Opening ${member.name}'s profile`, 'info');
            }
        }

        // Profile Tab Management
        function switchProfileTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.profile-tab-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.profile-tab').forEach(tab => {
                tab.classList.remove('active', 'border-primary', 'text-primary');
                tab.classList.add('border-transparent', 'text-gray-500');
            });

            // Show selected tab
            document.getElementById('tab-content-profile-' + tabName).classList.remove('hidden');
            document.getElementById('tab-profile-' + tabName).classList.add('active', 'border-primary', 'text-primary');
            document.getElementById('tab-profile-' + tabName).classList.remove('border-transparent', 'text-gray-500');

            currentProfileTab = tabName;
        }

        // Team Management Functions
        function inviteTeamMember() {
            document.getElementById('inviteMemberModal').classList.remove('hidden');
        }

        function closeInviteModal() {
            document.getElementById('inviteMemberModal').classList.add('hidden');
        }

        function sendInvitation() {
            showToast('Invitation sent successfully', 'success');
            closeInviteModal();
        }

        function exportTeamData() {
            showToast('Team data exported successfully', 'success');
        }

        function editProfile() {
            showToast('Edit profile functionality', 'info');
        }

        function sendMessage() {
            showToast('Open messaging interface', 'info');
        }

        function changeCoverPhoto() {
            showToast('Change cover photo functionality', 'info');
        }

        function addSkill() {
            showToast('Add skill functionality', 'info');
        }

        function viewAllActivity() {
            showToast('View all activity functionality', 'info');
        }

        // Permissions Management
        function createNewRole() {
            showToast('Create new role functionality', 'info');
        }

        function editRole(role) {
            showToast(`Edit ${role} role functionality`, 'info');
        }

        function resetPermissions() {
            showToast('Permissions reset to defaults', 'info');
        }

        function savePermissions() {
            showToast('Permissions saved successfully', 'success');
        }

        function updateTeamMembersCount() {
            let filteredMembers = teamMembers;
            if (currentDepartmentFilter !== 'all') {
                filteredMembers = teamMembers.filter(member => member.department === currentDepartmentFilter);
            }
            document.getElementById('teamMembersCount').textContent = filteredMembers.length;
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = document.getElementById('toastIcon');

            const icons = {
                'success': 'fa-check-circle text-green-500',
                'error': 'fa-exclamation-circle text-red-500',
                'info': 'fa-info-circle text-blue-500'
            };

            toastIcon.className = `fas ${icons[type] || icons.success}`;
            toastMessage.textContent = message;

            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }

        function toggleNotifications() {
            showToast('Notifications panel', 'info');
        }

        // Demo helpers
        window.demoHelpers = {
            addSampleMember: () => {
                showToast('Add team member functionality', 'info');
            },
            showAllMembers: () => console.table(teamMembers.map(m => ({
                id: m.id,
                name: m.name,
                role: m.role,
                department: m.department,
                status: m.status,
                location: m.location
            }))),
            resetDemo: () => {
                if (confirm('Reset all demo data?')) {
                    location.reload();
                }
            }
        };

        console.log('%c🎉 ProjectHub Team Management Module Loaded!', 'font-size: 20px; font-weight: bold; color: #667eea;');
        console.log('%cAvailable demo helpers:', 'font-size: 14px; color: #64748b;');
        console.log('• demoHelpers.addSampleMember() - Add a sample team member');
        console.log('• demoHelpers.showAllMembers() - Display all team members in console');
        console.log('• demoHelpers.resetDemo() - Reset all data');
    </script>
</body>

</html>