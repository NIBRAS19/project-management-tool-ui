<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProjectHub - Projects Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        info: '#3b82f6',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .gradient-primary {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }
            .gradient-success {
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            }
            .gradient-warning {
                background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            }
            .gradient-danger {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            }
            .gradient-info {
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            }
            .animate-slide-in {
                animation: slideIn 0.3s ease-out;
            }
            .project-card {
                transition: all 0.2s ease;
            }
            .project-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .gantt-task {
                transition: all 0.2s ease;
            }
            .gantt-task:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            }
            .gantt-dependency {
                stroke-dasharray: 5,5;
            }
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            .scrollbar-thin {
                scrollbar-width: thin;
                scrollbar-color: #cbd5e1 #f1f5f9;
            }
            .scrollbar-thin::-webkit-scrollbar {
                width: 6px;
            }
            .scrollbar-thin::-webkit-scrollbar-track {
                background: #f1f5f9;
                border-radius: 3px;
            }
            .scrollbar-thin::-webkit-scrollbar-thumb {
                background: #cbd5e1;
                border-radius: 3px;
            }
            .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                background: #94a3b8;
            }
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Top Navigation -->
    <nav
        class="fixed top-0 left-0 right-0 bg-white border-b border-gray-200 h-[70px] flex items-center justify-between px-8 z-50">
        <div class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent cursor-pointer"
            onclick="navigateTo('dashboard')">
            ProjectHub
        </div>

        <div class="flex-1 max-w-md mx-10">
            <div class="relative">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"><i
                        class="fas fa-search"></i></span>
                <input type="text" id="globalSearch"
                    class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl text-sm focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all"
                    placeholder="Search projects, tasks, or people...">
            </div>
        </div>

        <div class="flex items-center gap-4">
            <button onclick="openCreateModal('project')"
                class="w-11 h-11 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-indigo-100 hover:text-primary transition-all hover:-translate-y-0.5">
                <i class="fas fa-plus"></i>
            </button>
            <button onclick="toggleNotifications()"
                class="relative w-11 h-11 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-indigo-100 hover:text-primary transition-all hover:-translate-y-0.5">
                <i class="fas fa-bell"></i>
                <span id="notifCount"
                    class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold w-5 h-5 rounded-full flex items-center justify-center">3</span>
            </button>
            <div onclick="navigateTo('settings')"
                class="w-11 h-11 rounded-xl gradient-primary text-white flex items-center justify-center font-semibold text-sm cursor-pointer hover:scale-105 hover:shadow-lg hover:shadow-primary/30 transition-all">
                SM
            </div>
        </div>
    </nav>

    <!-- App Layout -->
    <div class="flex mt-[70px]">
        <!-- Sidebar -->
        <aside
            class="fixed left-0 w-64 h-[calc(100vh-70px)] bg-white border-r border-gray-200 p-6 overflow-y-auto scrollbar-thin">
            <div class="mb-8">
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="dashboard" onclick="navigateTo('dashboard')">
                    <i class="fas fa-chart-bar w-5 text-center"></i>
                    <span class="font-medium">Dashboard</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="tasks" onclick="navigateTo('tasks')">
                    <i class="fas fa-tasks w-5 text-center"></i>
                    <span class="font-medium">Tasks</span>
                </div>
                <div class="nav-item active flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 gradient-primary text-white shadow-lg shadow-primary/20"
                    data-page="projects" onclick="navigateTo('projects')">
                    <i class="fas fa-folder w-5 text-center"></i>
                    <span class="font-medium">Projects</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="calendar" onclick="navigateTo('calendar')">
                    <i class="fas fa-calendar w-5 text-center"></i>
                    <span class="font-medium">Calendar</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="reports" onclick="navigateTo('reports')">
                    <i class="fas fa-chart-line w-5 text-center"></i>
                    <span class="font-medium">Reports</span>
                </div>
            </div>

            <div>
                <div class="text-xs font-bold text-gray-400 uppercase tracking-wider px-4 mb-3">Workspaces</div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="team" onclick="navigateTo('team')">
                    <i class="fas fa-users w-5 text-center"></i>
                    <span class="font-medium">Team</span>
                </div>
                <div class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition-all mb-1 text-gray-600 hover:bg-gray-100 hover:text-primary"
                    data-page="settings" onclick="navigateTo('settings')">
                    <i class="fas fa-cog w-5 text-center"></i>
                    <span class="font-medium">Settings</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="ml-64 flex-1 p-8">
            <!-- Projects Module -->
            <div id="projects-page" class="page">
                <!-- Projects Header -->
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h1 class="text-4xl font-bold text-gray-900 mb-1">Projects</h1>
                        <p class="text-gray-500">Manage and track all your team projects</p>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="toggleViewMode()" id="toggleViewBtn"
                            class="px-4 py-2 rounded-lg text-sm font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                            <i class="fas fa-grip-vertical mr-2"></i>Grid View
                        </button>
                        <button onclick="openCreateModal('project')"
                            class="gradient-primary text-white px-6 py-3 rounded-xl font-semibold shadow-lg shadow-primary/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/40 transition-all flex items-center gap-2">
                            <i class="fas fa-plus"></i>
                            <span>New Project</span>
                        </button>
                    </div>
                </div>

                <!-- Filter & Search Bar -->
                <div class="bg-white rounded-xl border border-gray-200 p-6 mb-8">
                    <div class="flex flex-wrap gap-4 items-center">
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-gray-700">Status:</span>
                            <select id="statusFilter" class="px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                onchange="filterProjects()">
                                <option value="all">All Status</option>
                                <option value="active">Active</option>
                                <option value="planning">Planning</option>
                                <option value="on-hold">On Hold</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-gray-700">Category:</span>
                            <select id="categoryFilter" class="px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                onchange="filterProjects()">
                                <option value="all">All Categories</option>
                                <option value="development">Development</option>
                                <option value="design">Design</option>
                                <option value="marketing">Marketing</option>
                                <option value="research">Research</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-gray-700">Date Range:</span>
                            <select id="dateFilter" class="px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                onchange="filterProjects()">
                                <option value="all">All Time</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="quarter">This Quarter</option>
                            </select>
                        </div>
                        <button onclick="clearProjectFilters()"
                            class="ml-auto text-sm text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times mr-1"></i> Clear Filters
                        </button>
                    </div>
                </div>

                <!-- Projects Grid View -->
                <div id="projectsGridView" class="projects-view">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Project cards will be populated here -->
                    </div>
                </div>

                <!-- Projects Table View -->
                <div id="projectsTableView" class="projects-view hidden">
                    <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b border-gray-200 sticky top-0">
                                    <tr>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Project Name</th>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Lead</th>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Status</th>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Progress</th>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Start - End</th>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Members</th>
                                        <th
                                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="projectsTable" class="bg-white divide-y divide-gray-200">
                                    <!-- Project rows will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Project Overview Page -->
            <div id="project-overview-page" class="page hidden">
                <!-- Project Header -->
                <div class="bg-white rounded-xl border border-gray-200 p-6 mb-8">
                    <div class="flex justify-between items-start mb-6">
                        <div class="flex items-center gap-4">
                            <div id="projectHeaderIcon"
                                class="w-16 h-16 rounded-2xl flex items-center justify-center text-3xl"
                                style="background: #667eea20; color: #667eea;">
                                <i class="fas fa-globe"></i>
                            </div>
                            <div>
                                <h1 id="projectHeaderTitle" class="text-3xl font-bold text-gray-900">Website Redesign
                                </h1>
                                <p id="projectHeaderDescription" class="text-gray-600 mt-1">Complete redesign of company
                                    website with modern UI/UX and improved performance</p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="editProject()"
                                class="px-4 py-2 rounded-lg text-sm font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                                <i class="fas fa-edit mr-2"></i>Edit
                            </button>
                            <button onclick="openGanttView()"
                                class="px-4 py-2 rounded-lg text-sm font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                                <i class="fas fa-chart-bar mr-2"></i>Gantt Chart
                            </button>
                        </div>
                    </div>

                    <!-- Key Info Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-50 p-4 rounded-xl">
                            <div class="text-sm text-gray-500 mb-1">Status</div>
                            <div class="flex items-center gap-2">
                                <span id="projectStatusBadge"
                                    class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-700">Active</span>
                                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl">
                            <div class="text-sm text-gray-500 mb-1">Timeline</div>
                            <div class="font-medium text-gray-900" id="projectTimeline">Oct 1 - Dec 15</div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl">
                            <div class="text-sm text-gray-500 mb-1">Progress</div>
                            <div class="flex items-center gap-2">
                                <div class="text-lg font-bold text-gray-900" id="projectProgress">68%</div>
                                <div class="flex-1 bg-gray-200 h-2 rounded-full overflow-hidden">
                                    <div id="projectProgressBar" class="h-full bg-green-500 rounded-full transition-all"
                                        style="width: 68%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl">
                            <div class="text-sm text-gray-500 mb-1">Budget</div>
                            <div class="font-medium text-gray-900" id="projectBudget">$24,500 / $30,000</div>
                        </div>
                    </div>

                    <!-- Members List -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-gray-700">Team Members:</span>
                            <div class="flex -space-x-2" id="projectMembersAvatars">
                                <!-- Members avatars will be populated here -->
                            </div>
                            <span class="text-sm text-gray-500 ml-2" id="projectMembersCount">8 members</span>
                        </div>
                        <button onclick="manageTeam()"
                            class="text-primary text-sm font-medium hover:text-secondary transition-colors">
                            <i class="fas fa-user-plus mr-1"></i> Manage Team
                        </button>
                    </div>
                </div>

                <!-- Project Tabs Navigation -->
                <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6">
                    <div class="flex gap-8 border-b border-gray-200">
                        <button id="tab-overview"
                            class="project-tab active py-3 border-b-2 border-primary text-primary font-medium"
                            onclick="switchProjectTab('overview')">
                            <i class="fas fa-chart-pie mr-2"></i>Overview
                        </button>
                        <button id="tab-tasks"
                            class="project-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                            onclick="switchProjectTab('tasks')">
                            <i class="fas fa-tasks mr-2"></i>Tasks
                        </button>
                        <button id="tab-files"
                            class="project-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                            onclick="switchProjectTab('files')">
                            <i class="fas fa-file-alt mr-2"></i>Files
                        </button>
                        <button id="tab-activity"
                            class="project-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                            onclick="switchProjectTab('activity')">
                            <i class="fas fa-history mr-2"></i>Activity
                        </button>
                        <button id="tab-time"
                            class="project-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                            onclick="switchProjectTab('time')">
                            <i class="fas fa-clock mr-2"></i>Time Logs
                        </button>
                        <button id="tab-members"
                            class="project-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                            onclick="switchProjectTab('members')">
                            <i class="fas fa-users mr-2"></i>Members
                        </button>
                        <button id="tab-reports"
                            class="project-tab py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium"
                            onclick="switchProjectTab('reports')">
                            <i class="fas fa-chart-line mr-2"></i>Reports
                        </button>
                    </div>
                </div>

                <!-- Overview Tab Content -->
                <div id="tab-content-overview" class="project-tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left Column -->
                        <div class="lg:col-span-2 space-y-8">
                            <!-- Task Statistics -->
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-xl font-semibold text-gray-900 mb-6">Task Overview</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                    <div class="text-center p-4 bg-blue-50 rounded-xl">
                                        <div class="text-2xl font-bold text-blue-600">56</div>
                                        <div class="text-sm text-gray-600">Total Tasks</div>
                                    </div>
                                    <div class="text-center p-4 bg-green-50 rounded-xl">
                                        <div class="text-2xl font-bold text-green-600">38</div>
                                        <div class="text-sm text-gray-600">Completed</div>
                                    </div>
                                    <div class="text-center p-4 bg-yellow-50 rounded-xl">
                                        <div class="text-2xl font-bold text-yellow-600">12</div>
                                        <div class="text-sm text-gray-600">In Progress</div>
                                    </div>
                                    <div class="text-center p-4 bg-red-50 rounded-xl">
                                        <div class="text-2xl font-bold text-red-600">6</div>
                                        <div class="text-sm text-gray-600">Overdue</div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <h4 class="font-medium text-gray-900">Task Status Distribution</h4>
                                    <button onclick="viewAllTasks()"
                                        class="text-primary text-sm font-medium hover:text-secondary transition-colors">
                                        View All Tasks →
                                    </button>
                                </div>
                            </div>

                            <!-- Timeline Chart -->
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-xl font-semibold text-gray-900 mb-6">Project Timeline</h3>
                                <div class="h-48 flex items-center justify-center bg-gray-50 rounded-xl">
                                    <div class="text-center text-gray-500">
                                        <i class="fas fa-chart-line text-3xl mb-3 opacity-50"></i>
                                        <p>Timeline chart visualization</p>
                                        <p class="text-sm mt-1">Gantt preview showing project milestones and deadlines
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Milestones -->
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-xl font-semibold text-gray-900">Milestones</h3>
                                    <button onclick="addMilestone()"
                                        class="text-primary text-sm font-medium hover:text-secondary transition-colors">
                                        <i class="fas fa-plus mr-1"></i> Add Milestone
                                    </button>
                                </div>
                                <div class="space-y-4" id="projectMilestones">
                                    <!-- Milestones will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="space-y-8">
                            <!-- Activity Feed -->
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-xl font-semibold text-gray-900">Recent Activity</h3>
                                    <button onclick="viewAllActivity()"
                                        class="text-primary text-sm font-medium hover:text-secondary transition-colors">
                                        View All →
                                    </button>
                                </div>
                                <div class="space-y-4 max-h-96 overflow-y-auto scrollbar-thin" id="projectActivityFeed">
                                    <!-- Activity items will be populated here -->
                                </div>
                            </div>

                            <!-- Upcoming Deadlines -->
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-xl font-semibold text-gray-900 mb-6">Upcoming Deadlines</h3>
                                <div class="space-y-3" id="upcomingDeadlines">
                                    <!-- Deadline items will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other Tab Contents -->
                <div id="tab-content-tasks" class="project-tab-content hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-tasks text-4xl mb-3 opacity-50"></i>
                            <p>Project tasks management interface</p>
                            <p class="text-sm mt-1">View, create, and manage tasks specific to this project</p>
                        </div>
                    </div>
                </div>

                <div id="tab-content-files" class="project-tab-content hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-file-alt text-4xl mb-3 opacity-50"></i>
                            <p>Project files and documents</p>
                            <p class="text-sm mt-1">Upload, organize, and share project-related files</p>
                        </div>
                    </div>
                </div>

                <div id="tab-content-activity" class="project-tab-content hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-history text-4xl mb-3 opacity-50"></i>
                            <p>Complete project activity log</p>
                            <p class="text-sm mt-1">Track all changes and updates made to the project</p>
                        </div>
                    </div>
                </div>

                <div id="tab-content-time" class="project-tab-content hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-clock text-4xl mb-3 opacity-50"></i>
                            <p>Time tracking and logs</p>
                            <p class="text-sm mt-1">Monitor time spent on project tasks by team members</p>
                        </div>
                    </div>
                </div>

                <div id="tab-content-members" class="project-tab-content hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-users text-4xl mb-3 opacity-50"></i>
                            <p>Project team members</p>
                            <p class="text-sm mt-1">Manage team members and their roles in the project</p>
                        </div>
                    </div>
                </div>

                <div id="tab-content-reports" class="project-tab-content hidden">
                    <div class="bg-white rounded-xl border border-gray-200 p-6">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-chart-line text-4xl mb-3 opacity-50"></i>
                            <p>Project reports and analytics</p>
                            <p class="text-sm mt-1">Generate detailed reports on project progress and performance</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gantt Chart View -->
            <div id="gantt-view-page" class="page hidden">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h1 class="text-4xl font-bold text-gray-900 mb-1" id="ganttProjectTitle">Project Gantt Chart
                        </h1>
                        <p class="text-gray-500">Visualize project timeline, tasks, and dependencies</p>
                    </div>
                    <div class="flex gap-3">
                        <select id="ganttZoom" class="px-3 py-2 border border-gray-300 rounded-lg text-sm"
                            onchange="changeGanttZoom()">
                            <option value="week">Week View</option>
                            <option value="month" selected>Month View</option>
                            <option value="quarter">Quarter View</option>
                        </select>
                        <button onclick="exportGantt()"
                            class="px-4 py-2 rounded-lg text-sm font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                            <i class="fas fa-download mr-2"></i>Export
                        </button>
                        <button onclick="closeGanttView()"
                            class="px-4 py-2 rounded-lg text-sm font-medium border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                            <i class="fas fa-times mr-2"></i>Close
                        </button>
                    </div>
                </div>

                <!-- Gantt Chart Container -->
                <div class="bg-white rounded-xl border border-gray-200 p-6">
                    <!-- Gantt Controls -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-2">
                            <button
                                class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span class="px-3 py-1 text-sm font-medium text-gray-700" id="ganttDateRange">Oct 1 - Dec
                                31, 2025</span>
                            <button
                                class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="flex gap-2">
                            <select id="ganttFilter" class="px-3 py-1 border border-gray-300 rounded-lg text-sm">
                                <option value="all">All Tasks</option>
                                <option value="assigned">My Tasks</option>
                                <option value="overdue">Overdue</option>
                            </select>
                        </div>
                    </div>

                    <!-- Gantt Chart -->
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                        <div class="flex">
                            <!-- Sidebar -->
                            <div class="w-80 border-r border-gray-200 bg-gray-50">
                                <div class="p-4 border-b border-gray-200 font-semibold text-gray-700">Tasks</div>
                                <div id="ganttSidebar" class="divide-y divide-gray-200">
                                    <!-- Task list will be populated here -->
                                </div>
                            </div>

                            <!-- Timeline Area -->
                            <div class="flex-1 overflow-x-auto">
                                <div id="ganttTimelineHeader" class="border-b border-gray-200 bg-gray-50">
                                    <!-- Timeline header will be populated here -->
                                </div>
                                <div id="ganttTimeline" class="relative min-h-[400px] bg-white">
                                    <!-- Gantt bars and dependencies will be rendered here -->
                                    <svg id="ganttDependencies" class="absolute inset-0 pointer-events-none"
                                        style="z-index: 10;"></svg>
                                    <div id="ganttBars" class="relative z-20">
                                        <!-- Gantt bars will be populated here -->
                                    </div>
                                    <!-- Current date line -->
                                    <div id="currentDateLine" class="absolute top-0 bottom-0 w-0.5 bg-red-500 z-30"
                                        style="left: 30%;">
                                        <div class="absolute -top-2 -left-1 w-3 h-3 bg-red-500 rounded-full"></div>
                                        <div
                                            class="absolute -top-8 -left-8 bg-red-500 text-white text-xs px-2 py-1 rounded">
                                            Today</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="flex gap-6 mt-6 text-sm">
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-blue-500 rounded"></div>
                            <span class="text-gray-600">Not Started</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                            <span class="text-gray-600">In Progress</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-green-500 rounded"></div>
                            <span class="text-gray-600">Completed</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-red-500 rounded"></div>
                            <span class="text-gray-600">Overdue</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-0.5 h-4 bg-gray-400 gantt-dependency"></div>
                            <span class="text-gray-600">Dependency</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Pages (simplified) -->
            <div id="dashboard-page" class="page hidden">
                <h1 class="text-4xl font-bold text-gray-900 mb-2">Dashboard</h1>
                <p class="text-gray-500 mb-8">Your project overview</p>
                <div class="bg-white rounded-xl border border-gray-200 p-20 text-center text-gray-400">
                    <i class="fas fa-chart-bar text-4xl mb-3 opacity-50"></i>
                    <p>Dashboard interface...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Project Modal -->
    <div id="createProjectModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl">
            <div class="flex justify-between items-center p-8 border-b border-gray-200">
                <h2 class="text-2xl font-semibold text-gray-900">Create New Project</h2>
                <button onclick="closeCreateProjectModal()"
                    class="w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="p-8 space-y-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Project Name</label>
                    <input type="text" id="projectName"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all"
                        placeholder="Enter project name...">
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Description</label>
                    <textarea id="projectDescription" rows="3"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all resize-none"
                        placeholder="Describe the project..."></textarea>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Start Date</label>
                        <input type="date" id="projectStartDate"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">End Date</label>
                        <input type="date" id="projectEndDate"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Status</label>
                        <select id="projectStatus"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                            <option value="planning">Planning</option>
                            <option value="active" selected>Active</option>
                            <option value="on-hold">On Hold</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Category</label>
                        <select id="projectCategory"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                            <option value="development">Development</option>
                            <option value="design">Design</option>
                            <option value="marketing">Marketing</option>
                            <option value="research">Research</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Project Lead</label>
                    <select id="projectLead"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all">
                        <option value="sm">Sarah Mitchell</option>
                        <option value="mj">Mike Johnson</option>
                        <option value="al">Alex Lee</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Team Members</label>
                    <div class="space-y-2 max-h-32 overflow-y-auto border-2 border-gray-200 rounded-xl p-3">
                        <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg">
                            <input type="checkbox" id="member-sm" checked>
                            <label for="member-sm" class="flex items-center gap-2 cursor-pointer">
                                <div
                                    class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center text-xs font-semibold">
                                    SM</div>
                                <span>Sarah Mitchell</span>
                            </label>
                        </div>
                        <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg">
                            <input type="checkbox" id="member-mj" checked>
                            <label for="member-mj" class="flex items-center gap-2 cursor-pointer">
                                <div
                                    class="w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-semibold">
                                    MJ</div>
                                <span>Mike Johnson</span>
                            </label>
                        </div>
                        <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg">
                            <input type="checkbox" id="member-al">
                            <label for="member-al" class="flex items-center gap-2 cursor-pointer">
                                <div
                                    class="w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-semibold">
                                    AL</div>
                                <span>Alex Lee</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex gap-3 justify-end p-6 border-t border-gray-200">
                <button onclick="closeCreateProjectModal()"
                    class="px-6 py-3 rounded-xl font-semibold border-2 border-gray-200 hover:border-primary hover:text-primary transition-all">
                    Cancel
                </button>
                <button onclick="createProject()"
                    class="gradient-primary text-white px-6 py-3 rounded-xl font-semibold shadow-lg shadow-primary/30 hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/40 transition-all">
                    Create Project
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"
        class="hidden fixed top-24 right-8 bg-white p-4 rounded-xl shadow-2xl z-[60] min-w-[300px] border-l-4 animate-slide-in">
        <div class="flex items-center gap-3">
            <i id="toastIcon" class="fas fa-check-circle text-green-500"></i>
            <div id="toastMessage" class="text-sm font-medium text-gray-900"></div>
        </div>
    </div>

    <script>
        // Projects Data
        let projects = [
            {
                id: 1,
                name: 'Website Redesign',
                description: 'Complete redesign of company website with modern UI/UX and improved performance',
                icon: 'fas fa-globe',
                color: '#667eea',
                status: 'active',
                category: 'development',
                progress: 68,
                startDate: '2025-10-01',
                endDate: '2025-12-15',
                lead: { id: 'sm', name: 'Sarah Mitchell', avatar: 'SM' },
                members: [
                    { id: 'sm', name: 'Sarah Mitchell', avatar: 'SM', role: 'Project Manager' },
                    { id: 'mj', name: 'Mike Johnson', avatar: 'MJ', role: 'Design Lead' },
                    { id: 'al', name: 'Alex Lee', avatar: 'AL', role: 'Frontend Developer' },
                    { id: 'tj', name: 'Taylor Jones', avatar: 'TJ', role: 'Backend Developer' },
                    { id: 'kr', name: 'Kim Rivera', avatar: 'KR', role: 'QA Engineer' }
                ],
                budget: { total: 30000, used: 24500 },
                tasks: { total: 56, completed: 38, inProgress: 12, overdue: 6 },
                milestones: [
                    { id: 1, name: 'Design Phase Complete', date: '2025-10-20', completed: true },
                    { id: 2, name: 'Frontend Development', date: '2025-11-15', completed: false },
                    { id: 3, name: 'Backend Integration', date: '2025-11-30', completed: false },
                    { id: 4, name: 'Testing & Launch', date: '2025-12-10', completed: false }
                ],
                activity: [
                    { id: 1, type: 'task_completed', user: 'MJ', description: 'Completed homepage design', timestamp: '2 hours ago' },
                    { id: 2, type: 'comment', user: 'AL', description: 'Commented on API integration task', timestamp: '4 hours ago' },
                    { id: 3, type: 'file_upload', user: 'SM', description: 'Uploaded project requirements document', timestamp: '1 day ago' },
                    { id: 4, type: 'status_update', user: 'TJ', description: 'Updated backend task status', timestamp: '2 days ago' }
                ],
                ganttTasks: [
                    { id: 1, name: 'Project Planning', start: '2025-10-01', end: '2025-10-07', progress: 100, status: 'completed', dependencies: [] },
                    { id: 2, name: 'UI/UX Design', start: '2025-10-08', end: '2025-10-25', progress: 100, status: 'completed', dependencies: [1] },
                    { id: 3, name: 'Frontend Development', start: '2025-10-20', end: '2025-11-15', progress: 75, status: 'in-progress', dependencies: [2] },
                    { id: 4, name: 'Backend Development', start: '2025-10-27', end: '2025-11-20', progress: 60, status: 'in-progress', dependencies: [1] },
                    { id: 5, name: 'API Integration', start: '2025-11-10', end: '2025-11-30', progress: 30, status: 'not-started', dependencies: [3, 4] },
                    { id: 6, name: 'Testing & QA', start: '2025-11-25', end: '2025-12-10', progress: 0, status: 'not-started', dependencies: [5] },
                    { id: 7, name: 'Deployment', start: '2025-12-11', end: '2025-12-15', progress: 0, status: 'not-started', dependencies: [6] }
                ]
            },
            {
                id: 2,
                name: 'Mobile App Launch',
                description: 'Develop and launch new mobile application for iOS and Android platforms',
                icon: 'fas fa-mobile-alt',
                color: '#4facfe',
                status: 'active',
                category: 'development',
                progress: 42,
                startDate: '2025-09-15',
                endDate: '2026-01-30',
                lead: { id: 'al', name: 'Alex Lee', avatar: 'AL' },
                members: [
                    { id: 'al', name: 'Alex Lee', avatar: 'AL', role: 'Tech Lead' },
                    { id: 'mj', name: 'Mike Johnson', avatar: 'MJ', role: 'UI Designer' },
                    { id: 'kr', name: 'Kim Rivera', avatar: 'KR', role: 'Mobile Developer' }
                ],
                budget: { total: 45000, used: 18900 },
                tasks: { total: 34, completed: 14, inProgress: 16, overdue: 4 },
                milestones: [
                    { id: 1, name: 'Wireframes Approved', date: '2025-10-01', completed: true },
                    { id: 2, name: 'MVP Development', date: '2025-11-30', completed: false }
                ],
                activity: [],
                ganttTasks: []
            },
            {
                id: 3,
                name: 'CRM Migration',
                description: 'Migrate from legacy CRM system to new cloud-based solution',
                icon: 'fas fa-database',
                color: '#43e97b',
                status: 'planning',
                category: 'development',
                progress: 25,
                startDate: '2025-11-01',
                endDate: '2026-02-28',
                lead: { id: 'tj', name: 'Taylor Jones', avatar: 'TJ' },
                members: [
                    { id: 'tj', name: 'Taylor Jones', avatar: 'TJ', role: 'Project Lead' },
                    { id: 'sm', name: 'Sarah Mitchell', avatar: 'SM', role: 'Business Analyst' }
                ],
                budget: { total: 28000, used: 7000 },
                tasks: { total: 28, completed: 7, inProgress: 5, overdue: 0 },
                milestones: [],
                activity: [],
                ganttTasks: []
            },
            {
                id: 4,
                name: 'Q4 Marketing Campaign',
                description: 'End of year marketing campaign with social media and email marketing',
                icon: 'fas fa-bullhorn',
                color: '#ff9a9e',
                status: 'on-hold',
                category: 'marketing',
                progress: 15,
                startDate: '2025-10-01',
                endDate: '2025-12-31',
                lead: { id: 'kr', name: 'Kim Rivera', avatar: 'KR' },
                members: [
                    { id: 'kr', name: 'Kim Rivera', avatar: 'KR', role: 'Marketing Lead' },
                    { id: 'mj', name: 'Mike Johnson', avatar: 'MJ', role: 'Content Creator' }
                ],
                budget: { total: 15000, used: 2250 },
                tasks: { total: 18, completed: 3, inProgress: 2, overdue: 2 },
                milestones: [],
                activity: [],
                ganttTasks: []
            }
        ];

        let currentProjectView = 'grid';
        let currentProject = null;
        let currentProjectTab = 'overview';

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            navigateTo('projects');
            renderProjects();
            // Set default dates for project creation
            const today = new Date();
            const nextMonth = new Date(today);
            nextMonth.setMonth(today.getMonth() + 2);

            document.getElementById('projectStartDate').value = today.toISOString().split('T')[0];
            document.getElementById('projectEndDate').value = nextMonth.toISOString().split('T')[0];
        });

        // Navigation
        function navigateTo(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(page + '-page').classList.remove('hidden');

            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.page === page) {
                    item.classList.remove('text-gray-600', 'hover:bg-gray-100', 'hover:text-primary');
                    item.classList.add('gradient-primary', 'text-white', 'shadow-lg', 'shadow-primary/20');
                } else {
                    item.classList.add('text-gray-600', 'hover:bg-gray-100', 'hover:text-primary');
                    item.classList.remove('gradient-primary', 'text-white', 'shadow-lg', 'shadow-primary/20');
                }
            });
        }

        function openProjectOverview(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;

            currentProject = project;

            // Update project header
            document.getElementById('projectHeaderIcon').innerHTML = `<i class="${project.icon}"></i>`;
            document.getElementById('projectHeaderIcon').style.backgroundColor = `${project.color}20`;
            document.getElementById('projectHeaderIcon').style.color = project.color;
            document.getElementById('projectHeaderTitle').textContent = project.name;
            document.getElementById('projectHeaderDescription').textContent = project.description;

            // Update key info cards
            document.getElementById('projectStatusBadge').textContent = project.status.charAt(0).toUpperCase() + project.status.slice(1);
            document.getElementById('projectStatusBadge').className = `px-2 py-1 text-xs font-semibold rounded-full ${getStatusClass(project.status)}`;
            document.getElementById('projectTimeline').textContent = `${formatDate(project.startDate)} - ${formatDate(project.endDate)}`;
            document.getElementById('projectProgress').textContent = `${project.progress}%`;
            document.getElementById('projectProgressBar').style.width = `${project.progress}%`;
            document.getElementById('projectBudget').textContent = `$${project.budget.used.toLocaleString()} / $${project.budget.total.toLocaleString()}`;

            // Update members
            const membersContainer = document.getElementById('projectMembersAvatars');
            membersContainer.innerHTML = project.members.map(member => `
                <div class="w-8 h-8 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center text-blue-600 text-xs font-semibold" title="${member.name}">
                    ${member.avatar}
                </div>
            `).join('');
            document.getElementById('projectMembersCount').textContent = `${project.members.length} members`;

            // Load overview tab content
            loadProjectOverviewTab();

            navigateTo('project-overview');
        }

        function closeProjectOverview() {
            navigateTo('projects');
            currentProject = null;
        }

        // View Toggle
        function toggleViewMode() {
            const gridView = document.getElementById('projectsGridView');
            const tableView = document.getElementById('projectsTableView');
            const toggleBtn = document.getElementById('toggleViewBtn');

            if (currentProjectView === 'grid') {
                gridView.classList.add('hidden');
                tableView.classList.remove('hidden');
                toggleBtn.innerHTML = '<i class="fas fa-table mr-2"></i>Table View';
                currentProjectView = 'table';
                renderProjectsTableView();
            } else {
                gridView.classList.remove('hidden');
                tableView.classList.add('hidden');
                toggleBtn.innerHTML = '<i class="fas fa-grip-vertical mr-2"></i>Grid View';
                currentProjectView = 'grid';
                renderProjectsGridView();
            }
        }

        // Projects Rendering
        function renderProjects() {
            if (currentProjectView === 'grid') {
                renderProjectsGridView();
            } else {
                renderProjectsTableView();
            }
        }

        function renderProjectsGridView() {
            const container = document.getElementById('projectsGridView');
            container.innerHTML = projects.map(project => `
                <div class="project-card bg-white rounded-xl border border-gray-200 p-6 cursor-pointer hover:border-primary transition-all" onclick="openProjectOverview(${project.id})">
                    <div class="flex justify-between items-start mb-4">
                        <div class="w-12 h-12 rounded-xl flex items-center justify-center text-2xl" style="background: ${project.color}20; color: ${project.color};">
                            <i class="${project.icon}"></i>
                        </div>
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${getStatusClass(project.status)}">
                            ${project.status.charAt(0).toUpperCase() + project.status.slice(1)}
                        </span>
                    </div>
                    
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">${project.name}</h3>
                    <p class="text-sm text-gray-500 mb-4 line-clamp-2">${project.description}</p>
                    
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Progress</span>
                                <span>${project.progress}%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="h-full rounded-full transition-all" style="width: ${project.progress}%; background: ${project.color};"></div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-600">
                            <div class="flex items-center gap-2">
                                <div class="flex -space-x-2">
                                    ${project.members.slice(0, 3).map(member => `
                                        <div class="w-6 h-6 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center text-blue-600 text-xs font-semibold" title="${member.name}">
                                            ${member.avatar}
                                        </div>
                                    `).join('')}
                                    ${project.members.length > 3 ? `
                                        <div class="w-6 h-6 rounded-full bg-gray-100 border-2 border-white flex items-center justify-center text-gray-600 text-xs font-semibold">
                                            +${project.members.length - 3}
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                            <div class="flex items-center gap-1 text-gray-500">
                                <i class="far fa-calendar"></i>
                                <span>${formatDate(project.endDate)}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderProjectsTableView() {
            const container = document.getElementById('projectsTable');
            container.innerHTML = projects.map(project => `
                <tr class="hover:bg-gray-50 transition-colors cursor-pointer" onclick="openProjectOverview(${project.id})">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg flex items-center justify-center" style="background: ${project.color}20; color: ${project.color};">
                                <i class="${project.icon}"></i>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${project.name}</div>
                                <div class="text-sm text-gray-500">${project.category}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-xs font-semibold">
                                ${project.lead.avatar}
                            </div>
                            <div class="ml-2 text-sm text-gray-900">${project.lead.name}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${getStatusClass(project.status)}">
                            ${project.status.charAt(0).toUpperCase() + project.status.slice(1)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center gap-2">
                            <div class="text-sm text-gray-900">${project.progress}%</div>
                            <div class="w-20 bg-gray-200 rounded-full h-2">
                                <div class="h-full rounded-full transition-all" style="width: ${project.progress}%; background: ${project.color};"></div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${formatDate(project.startDate)} - ${formatDate(project.endDate)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex -space-x-2">
                            ${project.members.slice(0, 4).map(member => `
                                <div class="w-6 h-6 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center text-blue-600 text-xs font-semibold" title="${member.name}">
                                    ${member.avatar}
                                </div>
                            `).join('')}
                            ${project.members.length > 4 ? `
                                <div class="w-6 h-6 rounded-full bg-gray-100 border-2 border-white flex items-center justify-center text-gray-600 text-xs font-semibold">
                                    +${project.members.length - 4}
                                </div>
                            ` : ''}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="event.stopPropagation(); editProject(${project.id})" class="text-primary hover:text-secondary mr-3">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="event.stopPropagation(); deleteProject(${project.id})" class="text-red-600 hover:text-red-900">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Project Tab Management
        function switchProjectTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.project-tab-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.project-tab').forEach(tab => {
                tab.classList.remove('active', 'border-primary', 'text-primary');
                tab.classList.add('border-transparent', 'text-gray-500');
            });

            // Show selected tab
            document.getElementById('tab-content-' + tabName).classList.remove('hidden');
            document.getElementById('tab-' + tabName).classList.add('active', 'border-primary', 'text-primary');
            document.getElementById('tab-' + tabName).classList.remove('border-transparent', 'text-gray-500');

            currentProjectTab = tabName;

            // Load tab content
            if (tabName === 'overview') {
                loadProjectOverviewTab();
            }
        }

        function loadProjectOverviewTab() {
            if (!currentProject) return;

            // Load milestones
            const milestonesContainer = document.getElementById('projectMilestones');
            milestonesContainer.innerHTML = currentProject.milestones.map(milestone => `
                <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="w-3 h-3 rounded-full ${milestone.completed ? 'bg-green-500' : 'bg-gray-300'}"></div>
                    <div class="flex-1">
                        <div class="font-medium text-gray-900">${milestone.name}</div>
                        <div class="text-sm text-gray-500">${formatDate(milestone.date)}</div>
                    </div>
                    <span class="px-2 py-1 text-xs font-semibold rounded-full ${milestone.completed ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'}">
                        ${milestone.completed ? 'Completed' : 'Upcoming'}
                    </span>
                </div>
            `).join('');

            // Load activity feed
            const activityContainer = document.getElementById('projectActivityFeed');
            activityContainer.innerHTML = currentProject.activity.map(activity => `
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-sm font-semibold flex-shrink-0">
                        ${activity.user}
                    </div>
                    <div class="flex-1">
                        <p class="text-sm text-gray-900">
                            <span class="font-semibold">${activity.user}</span> ${activity.description}
                        </p>
                        <p class="text-xs text-gray-500 mt-1">${activity.timestamp}</p>
                    </div>
                </div>
            `).join('');

            // Load upcoming deadlines
            const deadlinesContainer = document.getElementById('upcomingDeadlines');
            // This would normally come from project tasks
            deadlinesContainer.innerHTML = `
                <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                    <div>
                        <div class="font-medium text-gray-900">Design System Implementation</div>
                        <div class="text-sm text-gray-500">Due in 2 days</div>
                    </div>
                    <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-700">High</span>
                </div>
                <div class="flex justify-between items-center p-3 bg-white rounded-lg border border-gray-200">
                    <div>
                        <div class="font-medium text-gray-900">API Documentation</div>
                        <div class="text-sm text-gray-500">Due in 5 days</div>
                    </div>
                    <span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-700">Medium</span>
                </div>
            `;
        }

        // Gantt Chart View
        function openGanttView() {
            if (!currentProject) return;

            document.getElementById('ganttProjectTitle').textContent = `${currentProject.name} - Gantt Chart`;
            renderGanttChart();
            navigateTo('gantt-view');
        }

        function closeGanttView() {
            navigateTo('project-overview');
        }

        function renderGanttChart() {
            if (!currentProject) return;

            // Render sidebar
            const sidebar = document.getElementById('ganttSidebar');
            sidebar.innerHTML = currentProject.ganttTasks.map(task => `
                <div class="p-4 border-b border-gray-200" data-task-id="${task.id}">
                    <div class="font-medium text-gray-900 text-sm">${task.name}</div>
                    <div class="text-xs text-gray-500 mt-1">
                        ${formatDate(task.start)} - ${formatDate(task.end)}
                    </div>
                </div>
            `).join('');

            // Render timeline header (simplified)
            const timelineHeader = document.getElementById('ganttTimelineHeader');
            timelineHeader.innerHTML = `
                <div class="flex" style="width: 2000px;">
                    ${Array.from({ length: 12 }, (_, i) => {
                const date = new Date(2025, 9, 1); // October 1, 2025
                date.setMonth(date.getMonth() + i);
                return `
                            <div class="flex-1 p-4 text-center font-medium text-gray-700 border-r border-gray-200">
                                ${date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
                            </div>
                        `;
            }).join('')}
                </div>
            `;

            // Render gantt bars
            const ganttBars = document.getElementById('ganttBars');
            ganttBars.innerHTML = currentProject.ganttTasks.map(task => {
                const startOffset = 10; // Simplified calculation
                const width = 15 * (getDaysBetween(task.start, task.end) / 30); // Simplified width calculation

                return `
                    <div class="gantt-task absolute top-4 h-8 rounded ${getTaskStatusClass(task.status)}" 
                         style="left: ${startOffset}%; width: ${width}%; margin-top: ${(task.id - 1) * 60}px;"
                         data-task-id="${task.id}">
                        <div class="h-full rounded flex items-center px-2">
                            <div class="text-xs text-white font-medium truncate">${task.name}</div>
                        </div>
                        <div class="absolute -right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-white border-2 border-gray-300 rounded-full cursor-col-resize"></div>
                    </div>
                `;
            }).join('');

            // Render dependencies (simplified)
            const dependenciesSvg = document.getElementById('ganttDependencies');
            dependenciesSvg.innerHTML = currentProject.ganttTasks
                .filter(task => task.dependencies.length > 0)
                .map(task => {
                    task.dependencies.forEach(depId => {
                        // Simplified dependency lines
                        return `
                            <line x1="15%" y1="30" x2="25%" y2="90" stroke="#6b7280" stroke-width="2" class="gantt-dependency" />
                        `;
                    });
                }).join('') || '';
        }

        function changeGanttZoom() {
            showToast('Gantt chart zoom changed', 'info');
        }

        function exportGantt() {
            showToast('Gantt chart exported successfully', 'success');
        }

        // Project Management
        function openCreateModal(type) {
            if (type === 'project') {
                document.getElementById('createProjectModal').classList.remove('hidden');
            }
        }

        function closeCreateProjectModal() {
            document.getElementById('createProjectModal').classList.add('hidden');
        }

        function createProject() {
            const name = document.getElementById('projectName').value.trim();
            const description = document.getElementById('projectDescription').value.trim();
            const startDate = document.getElementById('projectStartDate').value;
            const endDate = document.getElementById('projectEndDate').value;
            const status = document.getElementById('projectStatus').value;
            const category = document.getElementById('projectCategory').value;
            const lead = document.getElementById('projectLead').value;

            if (!name) {
                showToast('Please enter a project name', 'error');
                return;
            }

            const newProject = {
                id: projects.length + 1,
                name,
                description,
                icon: 'fas fa-folder',
                color: '#667eea',
                status,
                category,
                progress: 0,
                startDate,
                endDate,
                lead: getProjectLead(lead),
                members: [getProjectLead(lead)],
                budget: { total: 0, used: 0 },
                tasks: { total: 0, completed: 0, inProgress: 0, overdue: 0 },
                milestones: [],
                activity: [],
                ganttTasks: []
            };

            projects.push(newProject);
            renderProjects();
            closeCreateProjectModal();
            showToast('Project created successfully', 'success');
        }

        function editProject(projectId) {
            showToast('Edit project functionality coming soon', 'info');
        }

        function deleteProject(projectId) {
            if (confirm('Are you sure you want to delete this project?')) {
                projects = projects.filter(p => p.id !== projectId);
                renderProjects();
                showToast('Project deleted successfully', 'success');
            }
        }

        // Utility Functions
        function getStatusClass(status) {
            switch (status) {
                case 'active': return 'bg-green-100 text-green-700';
                case 'planning': return 'bg-blue-100 text-blue-700';
                case 'on-hold': return 'bg-yellow-100 text-yellow-700';
                case 'completed': return 'bg-gray-100 text-gray-700';
                default: return 'bg-gray-100 text-gray-700';
            }
        }

        function getTaskStatusClass(status) {
            switch (status) {
                case 'completed': return 'bg-green-500';
                case 'in-progress': return 'bg-yellow-500';
                case 'overdue': return 'bg-red-500';
                default: return 'bg-blue-500';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function getDaysBetween(startDate, endDate) {
            const start = new Date(startDate);
            const end = new Date(endDate);
            return Math.ceil((end - start) / (1000 * 60 * 60 * 24));
        }

        function getProjectLead(key) {
            const leads = {
                'sm': { id: 'sm', name: 'Sarah Mitchell', avatar: 'SM' },
                'mj': { id: 'mj', name: 'Mike Johnson', avatar: 'MJ' },
                'al': { id: 'al', name: 'Alex Lee', avatar: 'AL' },
                'tj': { id: 'tj', name: 'Taylor Jones', avatar: 'TJ' },
                'kr': { id: 'kr', name: 'Kim Rivera', avatar: 'KR' }
            };
            return leads[key] || leads['sm'];
        }

        function filterProjects() {
            // In a real app, this would filter the projects
            showToast('Projects filtered', 'info');
        }

        function clearProjectFilters() {
            document.getElementById('statusFilter').value = 'all';
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('dateFilter').value = 'all';
            showToast('Filters cleared', 'info');
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = document.getElementById('toastIcon');

            const icons = {
                'success': 'fa-check-circle text-green-500',
                'error': 'fa-exclamation-circle text-red-500',
                'info': 'fa-info-circle text-blue-500'
            };

            toastIcon.className = `fas ${icons[type] || icons.success}`;
            toastMessage.textContent = message;

            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }

        function toggleNotifications() {
            showToast('Notifications panel', 'info');
        }

        // Demo helpers
        window.demoHelpers = {
            addSampleProject: () => {
                const sampleProject = {
                    id: projects.length + 1,
                    name: 'New Sample Project',
                    description: 'This is a sample project for demonstration purposes',
                    icon: 'fas fa-rocket',
                    color: '#8b5cf6',
                    status: 'planning',
                    category: 'development',
                    progress: 0,
                    startDate: new Date().toISOString().split('T')[0],
                    endDate: new Date(Date.now() + 60 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    lead: { id: 'sm', name: 'Sarah Mitchell', avatar: 'SM' },
                    members: [
                        { id: 'sm', name: 'Sarah Mitchell', avatar: 'SM', role: 'Project Manager' }
                    ],
                    budget: { total: 0, used: 0 },
                    tasks: { total: 0, completed: 0, inProgress: 0, overdue: 0 },
                    milestones: [],
                    activity: [],
                    ganttTasks: []
                };
                projects.push(sampleProject);
                renderProjects();
                showToast('Sample project added', 'success');
            },
            showAllProjects: () => console.table(projects.map(p => ({
                id: p.id,
                name: p.name,
                status: p.status,
                progress: p.progress,
                startDate: p.startDate,
                endDate: p.endDate,
                lead: p.lead.name
            }))),
            resetDemo: () => {
                if (confirm('Reset all demo data?')) {
                    location.reload();
                }
            }
        };

        console.log('%c🎉 ProjectHub Projects Module Loaded!', 'font-size: 20px; font-weight: bold; color: #667eea;');
        console.log('%cAvailable demo helpers:', 'font-size: 14px; color: #64748b;');
        console.log('• demoHelpers.addSampleProject() - Add a sample project');
        console.log('• demoHelpers.showAllProjects() - Display all projects in console');
        console.log('• demoHelpers.resetDemo() - Reset all data');
    </script>
</body>

</html>